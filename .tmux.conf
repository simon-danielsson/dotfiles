# ======================================================
# General Settings
# ======================================================

# Use 256 colors
set -a terminal-features "tmux-256color:RGB"
set -ga terminal-overrides ",xterm-256color:Tc"

# Start window index at 1
set -g base-index 1

# Self explanatory
set -g history-limit 50000

# Display time for messages
set -g display-time 4000

# Set focus events
set-option -g focus-events on

# Renumber windows when one is closed
set -g renumber-windows on

# Enable mouse support
set -g mouse on

# Refresh status every second
set -g status-interval 1

# Prevent automatic window renaming (neovim handles this instead)
set -g allow-rename off
set -g automatic-rename off

# ======================================================
# Keybindings
# ======================================================

unbind r

# Change prefix to Ctrl-a
set -g prefix C-a
unbind C-b
bind-key C-a send-prefix

# Windows & panes
unbind x
bind x confirm-before -p "kill-pane #P? (y/n)" kill-pane
bind X kill-pane
bind r command-prompt "rename-window %%"

bind N split-window -h -c "#{pane_current_path}"
bind E split-window -v -c "#{pane_current_path}"
bind O split-window -v -c "#{pane_current_path}"
bind I split-window -h -c "#{pane_current_path}"

bind -r -T prefix l resize-pane -L 20
bind -r -T prefix ö resize-pane -R 20
bind -r -T prefix u resize-pane -D 7
bind -r -T prefix p resize-pane -U 7

bind n select-pane -L
bind e select-pane -D
bind o select-pane -U
bind i select-pane -R

# Reload config
bind -r s source-file ~/.tmux.conf

# Open floating terminal
# bind -r ö popup -E -d "#{pane_current_path}" -w 90% -h 90%

# ======================================================
# Statusbar
# ======================================================

set -g message-style bg=red
# Position
set-option -g status-position top

# Colors
set -g status-bg        '#1a1a1a'
set -g status-fg        '#ffffff'
set -g message-style    'fg=#ffffff,bg=#1a1a1a'

# Left/Right sections
set -g status-left ""
set -g status-right '#[fg=default,bg=default,nobold]  %m-%d  %H:%M #[fg=#ffffff,bg=#212121,bold]  #S #{?client_prefix,#[bg=#FB4837]  󰻂  #[noreverse],}'

# Window list style
set -g window-status-format           '#[fg=#ffffff,bg=#1a1a1a]  #W '
set -g window-status-current-format   '#[bold]  #W '
set -g window-status-current-style    'fg=#ffffff,bg=#212121,bold'
setw -g mode-style 'fg=black bg=red bold'
